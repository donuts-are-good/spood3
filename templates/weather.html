{{define "content"}}
<div class="weather-absurd">
  <header class="wa-hero">
    <h2>Recreational Meteorology</h2>
    <p class="wa-sub">Filed by the Department · Deterministic yet unreasonable</p>
    <div class="wa-headline">
      <div>
        <span class="hl-k">Week:</span>
        <span class="hl-v">{{if .Tournament}}#{{.Tournament.WeekNumber}}{{else}}—{{end}}</span>
        <span class="hl-sep">·</span>
        <span class="hl-k">Tournament:</span>
        <span class="hl-v">{{if .Tournament}}{{.Tournament.Name}}{{else}}—{{end}}</span>
        <span class="hl-sep">·</span>
        <span class="hl-k">Sponsor:</span>
        <span class="hl-v">{{if .Tournament}}{{.Tournament.Sponsor}}{{else}}—{{end}}</span>
      </div>
      <div>
        <span class="hl-k">Week Start:</span>
        <span class="hl-v">{{if .WeeklyWeather}}{{formatDate .WeeklyWeather.WeekStart}}{{else}}—{{end}}</span>
        <span class="hl-sep">·</span>
        <span class="hl-k">Today:</span>
        <span class="hl-v">{{formatDate .Now}}</span>
      </div>
    </div>
  </header>

  <div class="wa-grid">
    <div class="wa-left">
      <div class="wa-pan" id="panel-visc-temp">
        <div class="wa-h">Weekly Trends — Temperature (°F) & Viscosity (cP)</div>
        <div class="legend" id="legend-main"></div>
        <svg id="svg-visc-temp" viewBox="0 0 860 320" preserveAspectRatio="xMidYMid meet"></svg>
        <div class="wa-ribbon" id="regime-ribbon"></div>
      </div>
      <div class="wa-pan" id="panel-labels">
        <div class="wa-kv">
          <div class="kv-item"><span class="k">Biome</span><span class="v" id="kv-biome">—</span></div>
          <div class="kv-item"><span class="k">Pizza</span><span class="v" id="kv-pizza">—</span></div>
          <div class="kv-item"><span class="k">Officials</span><span class="v" id="kv-off">—</span></div>
          <div class="kv-item"><span class="k">Cheese</span><span class="v" id="kv-cheese">—</span></div>
          <div class="kv-item"><span class="k">Time‑Mode</span><span class="v" id="kv-time">—</span></div>
        </div>
      </div>
    </div>

    <div class="wa-right">
      <div class="wa-pan" id="panel-rose">
        <div class="wa-h">Wind Rose — Circular Bureaucracy</div>
        <svg id="svg-rose" viewBox="0 0 420 420"></svg>
      </div>
      <div class="wa-pan" id="panel-counts">
        <div class="wa-h">Counts — Swarm of Allegations</div>
        <svg id="svg-swarm" viewBox="0 0 420 240"></svg>
      </div>
      <div class="wa-pan" id="panel-events">
        <div class="wa-h">Events — Timeline of Questionable Omens</div>
        <svg id="svg-events" viewBox="0 0 420 160"></svg>
      </div>
    </div>
  </div>

  <script>
    window.__WEATHER__ = {
      weekly: {{json .WeeklyWeather}},
      today: {{json .DailyWeather}},
      series: {{json .DailySeries}}
    };
  </script>
  <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
  <script src="/static/js/weather.js"></script>
</div>
{{end}}

